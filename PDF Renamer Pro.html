<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Auto-Renamer Pro</title>
   
    <!-- Professional Font - Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.1.1/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
   
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 50%, #f0fdfa 100%);
            color: #1e293b;
            line-height: 1.6;
            min-height: 100vh;
        }
       
        /* Animated Background Shapes */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(14, 165, 233, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(16, 185, 129, 0.06) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: -1;
        }
       
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(5deg); }
            66% { transform: translate(-20px, 20px) rotate(-5deg); }
        }
       
        .main-grid {
            display: grid;
            grid-template-columns: minmax(340px, 400px) 1fr;
            gap: 30px;
            max-width: 1900px;
            margin: 0 auto;
            padding: 30px 20px;
        }
       
        .sidebar {
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            border-radius: 28px;
            box-shadow:
                0 20px 60px rgba(99, 102, 241, 0.1),
                0 0 0 1px rgba(99, 102, 241, 0.05);
            padding: 40px;
            height: fit-content;
            position: sticky;
            top: 30px;
            border: 2px solid rgba(99, 102, 241, 0.1);
        }
       
        .sidebar h2 {
            font-size: 26px;
            font-weight: 800;
            margin-bottom: 28px;
            color: #1e293b;
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
       
        .privacy-badge {
            background: linear-gradient(135deg, #dbeafe 0%, #e0f2fe 100%);
            padding: 24px;
            border-radius: 20px;
            border-left: 6px solid #6366f1;
            margin-bottom: 28px;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
        }
       
        .privacy-badge h3 {
            font-weight: 700;
            margin-bottom: 8px;
            color: #1e40af;
            font-size: 16px;
        }
       
        .privacy-badge p {
            font-size: 14px;
            color: #475569;
            line-height: 1.7;
        }
       
        .input-group {
            margin-bottom: 22px;
        }
       
        .input-group label {
            font-weight: 600;
            display: block;
            margin-bottom: 10px;
            font-size: 15px;
            color: #334155;
        }
       
        .input-group input {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 14px;
            font-size: 15px;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            background: #ffffff;
        }
       
        .input-group input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
            background: #ffffff;
        }
       
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
       
        .header h1 {
            font-size: clamp(40px, 5vw, 64px);
            font-weight: 900;
            background: linear-gradient(135deg, #6366f1 0%, #7c3aed 60%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -1px;
        }
       
        .header p {
            color: #64748b;
            font-size: 18px;
            font-weight: 500;
        }
       
        .upload-zone {
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            border: 3px dashed #6366f1;
            border-radius: 28px;
            padding: 80px 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(99, 102, 241, 0.08);
            position: relative;
            overflow: hidden;
        }
       
        .upload-zone::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }
       
        .upload-zone:hover::before {
            opacity: 1;
        }
       
        .upload-zone:hover {
            border-color: #0ea5e9;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            box-shadow: 0 25px 60px rgba(14, 165, 233, 0.15);
            transform: translateY(-8px) scale(1.01);
        }
       
        .upload-zone.dragover {
            border-color: #0ea5e9;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            transform: scale(1.02);
        }
       
        .upload-icon {
            font-size: 96px;
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 24px;
            font-weight: 900;
            animation: bounce 2s ease-in-out infinite;
        }
       
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
       
        .upload-text {
            font-size: 32px;
            font-weight: 800;
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 14px;
        }
       
        .upload-subtext {
            color: #64748b;
            font-size: 17px;
            margin: 12px 0;
            font-weight: 500;
        }
       
        .upload-limits {
            background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%);
            border: 2px solid #fbbf24;
            border-radius: 16px;
            padding: 16px 24px;
            margin-top: 28px;
            font-weight: 600;
            color: #92400e;
            font-size: 15px;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.1);
        }
       
        .btn {
            padding: 18px 48px;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            font-family: 'Poppins', sans-serif;
            position: relative;
            overflow: hidden;
        }
       
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }
       
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
       
        .btn-primary {
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            color: white;
        }
       
        .btn-primary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #0284c7 100%);
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(14, 165, 233, 0.4);
        }
       
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
       
        .btn-success:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.4);
        }
       
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
       
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-4px);
            box-shadow: 0 15px 40px rgba(239, 68, 68, 0.4);
        }
       
        .btn-accent {
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            color: white;
        }
       
        .btn-accent:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #0284c7 100%);
            box-shadow: 0 15px 40px rgba(14, 165, 233, 0.4);
        }
       
        .btn:active {
            transform: translateY(-2px);
        }
       
        .btn:disabled {
            background: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
       
        .controls {
            text-align: center;
            margin: 40px 0;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
       
        .file-item, .download-item {
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            padding: 24px;
            border-radius: 20px;
            margin-bottom: 16px;
            box-shadow: 0 6px 25px rgba(99, 102, 241, 0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
            border: 2px solid rgba(99, 102, 241, 0.05);
            transition: all 0.3s ease;
        }
       
        .file-item:hover, .download-item:hover {
            box-shadow: 0 12px 40px rgba(14, 165, 233, 0.18);
            transform: translateY(-4px);
        }
       
        .status-badge {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 700;
            font-size: 13px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
       
        .status-pending { background: linear-gradient(135deg, #fef3c7 0%, #fef9c3 100%); color: #92400e; }
        .status-processing { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); color: #1e40af; }
        .status-success { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); color: #065f46; }
        .status-error { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); color: #991b1b; }
       
        .result-card {
            background: linear-gradient(135deg, #ffffff 0%, #fefefe 100%);
            padding: 60px 40px;
            border-radius: 32px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.15);
            margin: 40px 0;
            border: 2px solid rgba(99, 102, 241, 0.1);
        }
       
        .big-number {
            font-size: 88px;
            font-weight: 900;
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -3px;
        }
       
        .footer {
            text-align: center;
            padding: 10px 2rem;
            margin-top: 100px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            color: white;
            border-radius: 32px 32px 0 0;
            box-shadow: 0 -10px 50px rgba(0, 0, 0, 0.1);
        }
        
        .footer p {
            margin: 12px 0;
            font-size: 15px;
            color: #cbd5e1;
        }
        
       
        .developer-name {
            font-size: 26px;
            font-weight: 700;
            margin: 2px 0;
            background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .footer a {
            color: #60a5fa;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .footer a:hover {
            color: #93c5fd;
        }
        
        @media (max-width: 1024px) {
            .main-grid { grid-template-columns: 1fr; }
            .sidebar { position: static; }
            .header h1 { font-size: 40px; }
        }
    </style>
</head>
<body>
<div class="main-grid">
    <div class="sidebar">
        <h2>Settings</h2>
        <div class="privacy-badge">
            <h3>100% Private Processing</h3>
            <p>All files processed in your browser • Never uploaded • OCR powered</p>
        </div>
        <div class="input-group">
            <label>Prefix</label>
            <input type="text" id="prefixInput" placeholder="e.g. QTR_" />
        </div>
        <div class="input-group">
            <label>Suffix</label>
            <input type="text" id="suffixInput" placeholder="e.g. _2025" />
        </div>
    </div>
    <div class="main-content">
        <div class="header">
            <h1>PDF Auto-Renamer</h1>
            <p>AI-Powered Document Management with OCR Technology</p>
        </div>
        <div class="upload-zone" id="uploadZone">
            <div class="upload-icon">Cloud</div>
            <div class="upload-text">Drop PDFs Here or Click to Browse</div>
            <div class="upload-subtext">Multiple files • Max 50MB each</div>
            <div style="color:#64748b; font-size:15px; margin:16px 0; font-weight:500;">Your files are processed locally and never uploaded</div>
            <div class="upload-limits">Maximum per session: <strong>200 files</strong> or <strong>250 MB total</strong></div>
        </div>
        <input type="file" id="fileInput" accept=".pdf" multiple style="display:none;">
        <div class="controls" id="controls" style="display:none;">
            <button class="btn btn-primary" id="processBtn">Start Processing</button>
            <button class="btn btn-danger" id="clearBtn">Clear All</button>
        </div>
        <div id="fileList"></div>
        <div id="summary" style="display:none;"></div>
    </div>
</div>

<div class="footer">
    <p>© 2025 PDF Auto-Renamer Pro</p>
    <div class="developer-name">Shubhashchandra Mahato</div>
    <p>Contact: +974 3066 1812 • +977 980 782 7536</p>
    <a href="mailto:shubhashchandra2022@gmail.com">shubhashchandra2022@gmail.com</a>
</div>

<script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    const MAX_FILES = 200;
    const MAX_TOTAL_SIZE = 250 * 1024 * 1024;
    let files = [];
    const uploadZone = document.getElementById('uploadZone');
    const fileInput = document.getElementById('fileInput');
    const fileList = document.getElementById('fileList');
    const controls = document.getElementById('controls');
    const processBtn = document.getElementById('processBtn');
    const clearBtn = document.getElementById('clearBtn');
    const summary = document.getElementById('summary');

    uploadZone.onclick = () => fileInput.click();
    uploadZone.ondragover = e => { e.preventDefault(); uploadZone.classList.add('dragover'); };
    uploadZone.ondragleave = () => uploadZone.classList.remove('dragover');
    uploadZone.ondrop = e => { e.preventDefault(); uploadZone.classList.remove('dragover'); handleFiles(Array.from(e.dataTransfer.files).filter(f => f.type === 'application/pdf')); };
    fileInput.onchange = e => handleFiles(Array.from(e.target.files));

    function handleFiles(selectedFiles) {
        const totalCount = files.length + selectedFiles.length;
        const totalSize = files.reduce((s,f) => s + f.size, 0) + selectedFiles.reduce((s,f) => s + f.size, 0);
        if (totalCount > MAX_FILES) return alert(`Maximum 200 files allowed!`);
        if (totalSize > MAX_TOTAL_SIZE) return alert(`Maximum 250 MB total allowed!`);
        files = [...files, ...selectedFiles];
        renderFileList();
        controls.style.display = 'flex';
    }

    function renderFileList() {
        fileList.innerHTML = files.map((f,i) => `
            <div class="file-item">
                <div><strong>${f.name}</strong><br><small>${(f.size/1024/1024).toFixed(2)} MB</small></div>
                <span class="status-badge status-pending">Pending</span>
            </div>
        `).join('');
    }

    processBtn.onclick = async () => {
        processBtn.disabled = true;
        for (let i = 0; i < files.length; i++) await processFile(files[i], i);
        processBtn.disabled = false;
        showFinalResult();
    };

    async function processFile(file, i) {
        const item = fileList.children[i];
        const status = item.querySelector('span');
        status.className = 'status-badge status-processing';
        status.textContent = 'Processing...';
       
        try {
            const arr = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument({data: arr}).promise;
            const page = await pdf.getPage(1);
            const vp = page.getViewport({scale: 2});
            const canvas = document.createElement('canvas');
            canvas.width = vp.width; canvas.height = vp.height;
            await page.render({canvasContext: canvas.getContext('2d'), viewport: vp}).promise;
            const crop = document.createElement('canvas');
            const cw = canvas.width * 0.35, ch = canvas.height * 0.2;
            crop.width = cw; crop.height = ch;
            crop.getContext('2d').drawImage(canvas, 0, 0, cw, ch, 0, 0, cw, ch);
            const { data: { text } } = await Tesseract.recognize(crop.toDataURL(), 'eng');
            const num = text.match(/(?:No|Doc|Ref)[\s.:-]*([A-Z0-9]{7,})/i)?.[1] || text.match(/\b([A-Z0-9]{8,})\b/)?.[0];
            if (num) {
                const prefix = document.getElementById('prefixInput').value;
                const suffix = document.getElementById('suffixInput').value;
                file.newName = `${prefix}${num}${suffix}.pdf`;
                status.className = 'status-badge status-success';
                status.textContent = 'Success';
            } else {
                status.className = 'status-badge status-error';
                status.textContent = 'Failed';
            }
        } catch (e) {
            status.className = 'status-badge status-error';
            status.textContent = 'Error';
        }
    }

    function showFinalResult() {
        uploadZone.style.display = 'none';
        fileList.innerHTML = '';
        controls.style.display = 'none';
        const success = files.filter(f => f.newName).length;
        const failed = files.length - success;
        summary.style.display = 'block';
        summary.innerHTML = `
            <div class="result-card">
                <h3>Processing Complete!</h3>
                <div style="display:flex; justify-content:center; gap:100px; flex-wrap:wrap; margin:40px 0;">
                    <div><div class="big-number">${files.length}</div><div class="label">Total</div></div>
                    <div><div class="big-number">${success}</div><div class="label">Success</div></div>
                    <div><div class="big-number">${failed}</div><div class="label">Failed</div></div>
                </div>
                <div class="action-buttons">
                    <button onclick="downloadAll()" class="btn btn-primary">Download All as ZIP</button>
                    <button onclick="processMore()" class="btn btn-accent">Process More Files</button>
                </div>
            </div>
            <div class="download-list">
                <h3>Renamed Files</h3>
                ${files.filter(f => f.newName).map((f, idx) => `
                    <div class="download-item">
                        <div>
                            <strong>${f.newName}</strong><br>
                            <small>from: ${f.name}</small>
                        </div>
                        <button onclick="downloadSingle(${files.indexOf(f)})" class="btn btn-success" style="padding:12px 32px; font-size:15px;">
                            Download PDF
                        </button>
                    </div>
                `).join('')}
            </div>
        `;
    }

    async function downloadAll() {
        const zip = new JSZip();
        files.filter(f => f.newName).forEach(f => zip.file(f.newName, f));
        const blob = await zip.generateAsync({type:'blob'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `Renamed_PDFs_${new Date().toISOString().slice(0,10)}.zip`;
        a.click();
    }

    window.downloadSingle = function(index) {
        const file = files[index];
        const a = document.createElement('a');
        a.href = URL.createObjectURL(file);
        a.download = file.newName;
        a.click();
    }

    window.processMore = function() {
        files = [];
        summary.style.display = 'none';
        summary.innerHTML = '';
        uploadZone.style.display = 'block';
        controls.style.display = 'none';
        fileList.innerHTML = '';
    }

    clearBtn.onclick = () => { 
        files = []; 
        fileList.innerHTML = ''; 
        controls.style.display = 'none'; 
    };
</script>
</body>
</html>
